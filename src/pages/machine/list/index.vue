<template>
  <div class="machine-list page-list">
    <FilterItems @change="getListData" />
    <span class="machine-list__summary">
      æ€»æ•°ï¼š100å° æœªå¼€æœºï¼š2å° è¿è¡Œä¸­ï¼š98å° åœæœºï¼š0å° å¼€æœºç‡ï¼š98%
    </span>
    <div class="flex mt-6x">
      <a-button class="machine-list__btn" type="primary" @click="handleAdd">
        æ·»åŠ æœºå°
      </a-button>
      <a-button class="machine-list__btn" @click="handleAdd">æ‰¹é‡æ¢å¸ƒ</a-button>
      <a-button class="machine-list__btn" @click="handleAdd">æ‰¹é‡ç¼–è¾‘</a-button>
      <a-button class="machine-list__btn" @click="handleAdd">
        æ‰¹é‡æ·»åŠ æœºå°
      </a-button>
    </div>
    <div class="machine-list__content">
      <div v-for="item in list" :key="item.id" class="machine-list__card">
        <ItemCard v-model="item.checked" :info="item" />
      </div>
      <div v-for="e in new Array(10)" :key="e" class="machine-list__card"></div>
    </div>
    <!-- <FactoryFormModal
      :visible="showModal"
      :opt="opt"
      :form="formData"
      @close="handleClose"
    /> -->
  </div>
</template>
<script name="machine-list" setup>
// import { delFactory } from '@/services'

// import FactoryFormModal from './components/FactoryFormModal'
import FilterItems from './components/FilterItems'
import ItemCard from './components/ItemCard'
import { useList } from './composition'

const { opt, showModal, list, getListData } = useList()
console.log('%c Line:39 ğŸ¥š list', 'color:#6ec1c2', list)
// const vm = getCurrentInstance().proxy
const handleAdd = () => {
  opt.value = 'add'
  showModal.value = true
  console.log('add')
}

// const handleEdit = record => {
//   opt.value = 'edit'
//   showModal.value = true
//   formData.id = record.id
//   formData.name = record.name
//   formData.contactName = record.contactName
//   formData.contactNumber = record.contactNumber
//   formData.address = record.address
//   formData.remark = record.remark
// }
// const initFormData = () => {
//   formData.name = ''
//   formData.contactName = ''
//   formData.contactNumber = ''
//   formData.address = ''
//   formData.remark = ''
//   formData.id = undefined
// }
// const handleClose = fresh => {
//   showModal.value = false
//   initFormData()
//   if (fresh) {
//     tableRef.value.reload()
//   }
// }
// const handleDel = record => {
//   vm.$confirm({
//     title: 'ç¡®å®šåˆ é™¤è¯¥ä»£å·¥å‚å—ï¼Ÿ',
//     content: 'åˆ é™¤åï¼Œè¯¥ä»£å·¥å‚å°†ä¸ä¼šåœ¨åŸæ–™çš„å…¥åº“è®¢å•ä¸­è¢«é€‰æ‹©ã€‚',
//     onOk() {
//       delFactory(record.id).then(() => {
//         vm.$message.success('ä»£å·¥å‚åˆ é™¤æˆåŠŸ')
//         tableRef.value.reload()
//       })
//     },
//     onCancel() {}
//   })
// }
</script>
<style lang="less" scoped>
.machine-list {
  &__summary {
    color: rgba(250, 53, 53, 0.65);
  }
  &__btn + &__btn {
    margin-left: 16px;
  }
  &__content {
    display: flex;
    flex-wrap: wrap;
    margin: 0 -6px;
  }
  &__card {
    flex: 1;
    max-width: 320px;
    min-width: 240px;
    margin: 12px 6px 0 6px;
  }
}
</style>
